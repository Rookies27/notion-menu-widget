<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¤ëŠ˜ì˜ ì‹ë‹¨í‘œ</title>
    <style>
        /* ë…¸ì…˜ ìŠ¤íƒ€ì¼ì˜ ê¹”ë”í•œ ë””ìì¸ */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #ffffff;
            color: #37352f;
            padding: 20px;
            margin: 0;
        }
        h2 {
            font-size: 1.2em;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 10px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
        }
        th, td {
            border: 1px solid #e0e0e0;
            padding: 8px 12px;
            text-align: left;
        }
        th {
            background-color: #f7f7f5;
            font-weight: 600;
        }
        /* ë¡œë”© ì¤‘ í‘œì‹œ */
        #loading { color: #888; font-style: italic; }
    </style>
</head>
<body>

    <h2>ğŸ“… ì‹ë‹¨í‘œ</h2>
    <div id="loading">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
    <table id="menuTable" style="display:none;">
        <thead>
            <tr id="tableHeader">
                </tr>
        </thead>
        <tbody id="tableBody">
            </tbody>
    </table>

    <script>
        // 1ë‹¨ê³„ì—ì„œ ì°¾ì€ URL ì•ë¶€ë¶„ì„ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš” (ë¬¼ìŒí‘œ ì•ê¹Œì§€)
        // ì˜ˆ: https://api.odcloud.kr/api/15130015/v1/uddi:xxxxx
        const API_ENDPOINT = "ì—¬ê¸°ì—_ì°¾ì€_URLì„_ë„£ìœ¼ì„¸ìš”"; 
        
        // ì œê³µí•´ì£¼ì‹  ì¼ë°˜ ì¸ì¦í‚¤ (Decoding)
        const API_KEY = "0JJK3XYNF/+whaTaIsGfjOOZeG9tiojSnTK9QFRJuwDxASYv3/o/GFTKd0p1pUS3cnWs1QK9CWGhH/kt2GFCaQ==";

        async function fetchMenu() {
            try {
                // API í˜¸ì¶œ (í˜ì´ì§€ 1, 10ê°œ í•­ëª© ìš”ì²­ ì˜ˆì‹œ)
                const url = `${API_ENDPOINT}?page=1&perPage=10&serviceKey=${encodeURIComponent(API_KEY)}`;
                
                const response = await fetch(url);
                if (!response.ok) throw new Error("ë„¤íŠ¸ì›Œí¬ ì‘ë‹µ ì‹¤íŒ¨");
                
                const json = await response.json();
                const data = json.data; // ì‹¤ì œ ë°ì´í„° ë°°ì—´

                renderTable(data);
            } catch (error) {
                document.getElementById('loading').innerText = "ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: " + error.message;
            }
        }

        function renderTable(data) {
            const loading = document.getElementById('loading');
            const table = document.getElementById('menuTable');
            const thead = document.getElementById('tableHeader');
            const tbody = document.getElementById('tableBody');

            if (data.length === 0) {
                loading.innerText = "ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.";
                return;
            }

            // 1. í…Œì´ë¸” í—¤ë” ìƒì„± (ë°ì´í„°ì˜ í‚¤ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ)
            const columns = Object.keys(data[0]);
            columns.forEach(col => {
                const th = document.createElement('th');
                th.innerText = col; // í•„ìš”ì‹œ í•œê¸€ ì»¬ëŸ¼ëª…ìœ¼ë¡œ ë§¤í•‘ ê°€ëŠ¥
                thead.appendChild(th);
            });

            // 2. í…Œì´ë¸” ë°”ë”” ìƒì„±
            data.forEach(row => {
                const tr = document.createElement('tr');
                columns.forEach(col => {
                    const td = document.createElement('td');
                    td.innerText = row[col] || "-";
                    tr.appendChild(td);
                });
                tbody.appendChild(tr);
            });

            loading.style.display = 'none';
            table.style.display = 'table';
        }

        fetchMenu();
    </script>
</body>
</html>